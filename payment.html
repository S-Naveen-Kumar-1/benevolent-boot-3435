
<!DOCTYPE html>
<html>
<head>
  <title>Tourism Website - Checkout</title>
  <link rel="stylesheet" href="style.css">
  <style>
     #cart{
            display: grid;
            grid-template-columns: repeat(3,1fr);
            /* border: 1px solid; */
            margin-top: 50px;
            gap: 50px;
            text-align: center;
            color: white;
        }
     #cart>div>img:nth-child(1){
            width: 100px;
            height: 100px;
            border-radius: 50%;
        }
        #cart>div>img:nth-child(7){
            width: 30px;
            display: flex;
            /* padding-top: 50px; */
            /* height: 100px; */
            border-radius: 50%;
            /* border: 1px solid red; */
            gap: 15px;
            margin-left: 300px;
            margin-top: -27px;
        }
        #invoice>tbody>tr>td:nth-child(2){
        text-align: end;
        color: rgb(140, 246, 168);
        }
        #paymentdisplay{
          display: flex;
          text-align: center;
          margin-left: 50px;
          margin-top: 50px;
          font-size: 20px;
          font-weight: bold;
          color: rgb(39, 37, 36);
        }
        #invoice>tbody>tr>td:nth-child(1){
          color: rgb(193, 209, 209);
        }
  </style>
</head>
<body>
  <div id="nav">
    <a href="homepage.html"><img id="logo" src="./Logo.png" alt=""></a>
    <a href="homepage.html"><span>HOME</span></a>
    <a href="destinations.html">POPULAR DESTINATIONS</a>
    <!-- <a href="login.html">LOGIN</a> -->
    <!-- <a href="./singnup.html">SIGNUP</a> -->
    <a href="booking.html">BOOKINGS</a>
</div>
    <div id="cart"></div>
    <table border="1px solid" id="invoice" cellspacing="0"  >
      <tbody>
          <tr>
            <td colspan="2" style="text-align: center; color: rgb(222, 140, 140);">INVOICE</td>
          </tr>
          <tr>
            <td>Total number of Packages</td>
            <td id="number"></td>
          </tr>
      
        <tr>
          <td>Total price</td>
          <td id="amount"></td>
        </tr>
      </tbody>
    </table>
    <div id="paymentdisplay" style="display: none;">
      <label >Payment Method:</label>
      <select id="paymentmethod" name="payment-method" required>
        <option value="">Select</option>
        <option value="creditcard">Credit Card</option>
        <option value="wallet">UPI</option>
        <option value="bank">Bank Transfer</option>
      </select>
    </div>
    

    <div id="cardpayment" style="display: none;">
        <table>
            <tr>
                <td> <label>Card Number:</label>
                </td>
                <td>
                    <input type="text" id="card-number" name="card-number" required>
                </td>
            </tr>
            <tr>
                <td><label for="card-holder">Card Holder:</label>
                </td>
                <td><input type="text" id="card-holder" name="card-holder" required></td>
            </tr>
            <tr>
                <td><label for="expiry-date">Expiry Date:</label></td>
                <td><input type="text" id="expiry-date" name="expiry-date" required></td>
            </tr>
            <tr>
                <td> <label for="cvv">CVV:</label></td>
                <td><input type="text" id="cvv" name="cvv" required></td>
            </tr>
            <tr>
                <td></td>
                <td><button id="buy1">Buy Package</button>
                </td>
            </tr>
        </table>  
    </div>
        <div id="bankpayment" style="display: none;">
         
            <table>
                <tr>
                    <td> <label>Username:</label>
                    </td>
                    <td>
                        <input type="text"  required>
                    </td>
                </tr>
                <tr>
                    <td><label>Password:</label>
                    </td>
                    <td><input required></td>
                </tr>
                <tr>
                    <td></td>
                    <td><button id="buy2">Buy Package</button>
                    </td>
                </tr>
            </table>  
            </div>

            <div id="walletpayment" style="display: none;">
                <table>
                    <tr>
                        <td> <label>Mobile/Username/VPA: </label>
                        </td>
                        <td>
                            <input type="text"  required>
                        </td>
                    </tr>
                    <tr>
                        <td><label>Password:</label>
                        </td>
                        <td><input required></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><button id="buy3">Buy Package</button>
                        </td>
                    </tr>
                </table>  
                </div>

  <script>
    let paymentMethod = document.getElementById("paymentmethod");
    let cardPayment= document.getElementById("cardpayment");
    let bankPayment=document.getElementById("bankpayment");
    let walletPayment=document.getElementById("walletpayment");
    let buy1=document.getElementById("buy1");
    let buy2=document.getElementById("buy2");
    let buy3=document.getElementById("buy3");
    let totalprice=document.getElementById("total");
    let paymentdisplay=document.getElementById("paymentdisplay")
    let buysomething=document.getElementById("buysomething")
   
    let no_of_packages=document.getElementById("number");
    let no_of_persons=document.getElementById("count");
    let total_price=document.getElementById("amount")



    
    paymentMethod.addEventListener("change", function() {
      if (paymentMethod.value === "creditcard") {
        cardPayment.style.display = "block";
        bankPayment.style.display = "none";
        walletPayment.style.display = "none";
      }
      else if(paymentMethod.value==="wallet"){
        walletPayment.style.display = "block";
        bankPayment.style.display = "none";
        cardPayment.style.display = "none";
      }
       else if(paymentMethod.value === "bank") {
        bankPayment.style.display = "block";
        cardPayment.style.display = "none";
        walletPayment.style.display = "none";
      }
     
      else{
        cardPayment.style.display = "none";
        bankPayment.style.display = "none";
        walletPayment.style.display = "none";
      }
    });

    
let buypackage=JSON.parse(localStorage.getItem("package")) || []
let arr=JSON.parse(localStorage.getItem("bought")) || []
let container=document.getElementById("cart");
// console.log(typeof totalprice.innerText)
no_of_packages.innerText=buypackage.length

if(buypackage.length>0){
      paymentdisplay.style.display="block"
    }
    else{
alert("Please Buy Some Packages")
window.open("destinations.html")
    }
let pricetotal=0;
for(let i=0;i<buypackage.length;i++){
  console.log(typeof buypackage[i].price)
  pricetotal+=buypackage[i].price
}
total_price.innerText=pricetotal;


display(buypackage)
    function display(data){
      container.innerHTML=null;
      data.map(function(e){
        // console.log(e)
        let card=document.createElement("div");
        let place=document.createElement("h2");
        let price=document.createElement("p")
        let plus=document.createElement("button")
        let person=document.createElement("span")
        let minus=document.createElement("button")
        let img=document.createElement("img")
        let delete1=document.createElement("img")

        place.innerText=e.place+" Package";
        price.innerText="Price: "+e.price;
        img.setAttribute("src",e.img)
        plus.innerText="+";
        person.innerText="No of Peroson's :"+e.quantity
        minus.innerText="-";
        delete1.setAttribute("src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS9k84pqqyAEtYysVu-ujy-yc-Q84_idaInZQ&usqp=CAU")
        card.append(img,place,price,plus,person,minus,delete1);
        container.append(card)
        
    buy1.addEventListener("click",function(){
        console.log("hi")
        price.innerText="";
        for(let i=0;i<arr.length;i++){
              if(arr[i].id===e.id){
                return 
                break;
              }
              // else{
              //   return alert("Package bought successfully")
              //   break;
              // }
        }
        alert ("Package bought successfully")
        window.open("booking.html")
        arr.push(e)
        localStorage.setItem("bought",JSON.stringify(arr))

          
         buypackage=buypackage.filter(function(el){
          return el.id!=e.id
        })
        localStorage.setItem("package",JSON.stringify(buypackage))
        display(buypackage)
    })
    buy2.addEventListener("click",function(){
        console.log("hi")
        price.innerText="";
        for(let i=0;i<arr.length;i++){
              if(arr[i].id===e.id){
                return 
                break;
              }
              // else{
              //   return alert("Package bought successfully")
              //   break;
              // }
        }
        alert ("Package bought successfully")
        window.open("booking.html")
        arr.push(e)
        localStorage.setItem("bought",JSON.stringify(arr))

          
        buypackage=buypackage.filter(function(el){
          return el.id!=e.id
        })
        localStorage.setItem("package",JSON.stringify(buypackage))
        display(buypackage)
        price.innerText="";

    })
    buy3.addEventListener("click",function(){
        console.log("hi")
        price.innerText="";
        for(let i=0;i<arr.length;i++){
              if(arr[i].id===e.id){
                return
                break;
              }
              // else{
              //   return alert("Package bought successfully")
              //   break;
              // }
        }
       
        alert ("Package bought successfully")
        window.open("booking.html")
        buypackage.push(e)
        localStorage.setItem("package",JSON.stringify(arr))

        buypackage=buypackage.filter(function(el){
          return el.id != e.id
        })
        localStorage.setItem("package",JSON.stringify(buypackage))
        display(buypackage)
        price.innerText="";
    })
    
    delete1.addEventListener("click",function(){
      buypackage=buypackage.filter(function(el){
          return el.id != e.id
        })
        localStorage.setItem("package",JSON.stringify(buypackage))
        display(buypackage)
        pricetotal-=e.price*e.quantity
        total_price.innerText=pricetotal
        no_of_packages.innerText--
    })      
      plus.addEventListener("click",function(){
        e.quantity++;
        person.innerText="No of Peroson's :"+e.quantity
        price.innerText="Price: "+(e.price*e.quantity);
        pricetotal+=e.price*1
        total_price.innerText=pricetotal;
        })
        minus.addEventListener("click",function(){
          if(e.quantity>1){
            e.quantity--;
        person.innerText="No of Peroson's :"+e.quantity
        price.innerText="Price: "+(e.price*e.quantity);
        pricetotal-=e.price*1
        total_price.innerText=pricetotal;
          }
      
        })
      })
     
    }
   
    
  </script>
</body>
</html>
